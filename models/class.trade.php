<?phpclass Trade{	public $trade_value;	public $trade_amount;	public $trade_type;	public $trade_id;	public $trade_to;	public $trade_from;	public $trade_owner;	public $etrade_owner;	public $etrade_type;	public $etrade_id;	public $etrade_value;	public $etrade_amount;	public $standard;	public $standarde;	public function UpdateTrade()	{		$id = $this->trade_id;		$amount = $this->trade_amount;		if($this->trade_amount <= 0)		{					mysql_query("DELETE FROM trades WHERE `Id`='$id'");		}		else		{			mysql_query("UPDATE trades SET `Amount`='$amount' WHERE `Id`='$id'");		}	}	public function UpdateETrade()	{		$id = $this->etrade_id;		$amount = $this->etrade_amount;		if($this->etrade_amount == 0)		{					mysql_query("DELETE FROM trades WHERE `Id`='$id'");		}		else		{			mysql_query("UPDATE trades SET `Amount`='$amount' WHERE `Id`='$id'");		}	}	function Trade($id)	{		$tradesql = mysql_query("SELECT * FROM trades WHERE `Id`='$id'");		$this->trade_value = mysql_result($tradesql,0,"Value");		$this->trade_amount = mysql_result($tradesql,0,"Amount");		$this->standard = mysql_result($tradesql,0,"Amount");		$this->trade_id = $id;		$this->trade_from = mysql_result($tradesql,0,"From");		$this->trade_to = mysql_result($tradesql,0,"To");		$this->trade_owner = mysql_result($tradesql,0,"User_ID");		$temp = mysql_result($tradesql,0,"Type");		$sqltemp = mysql_query("SELECT * FROM Wallets WHERE `Acronymn`='$temp'");		$this->trade_type = mysql_result($sqltemp,0,"Id");	}	public function GetEquivalentTrade()	{		$from = $this->trade_from;		$value = $this->trade_value;		echo $from;		$tradesql2 = mysql_query("SELECT * FROM trades WHERE `To` = '$from' AND `Value`=$value");		$this->etrade_id = mysql_result($tradesql2,0,"Id");		$this->etrade_value = mysql_result($tradesql2,0,"Value");		$this->etrade_amount = mysql_result($tradesql2,0,"Amount");		$this->standarde = mysql_result($tradesql2,0,"Amount");		$this->etrade_owner = mysql_result($tradesql2,0,"User_ID");		$temp = mysql_result($tradesql2,0,"To");		$sqltemp = mysql_query("SELECT * FROM Wallets WHERE `Acronymn`='$temp'");		$this->etrade_type = mysql_result($sqltemp,0,"Id");	}	public function ExecuteTrade()	{		if($this->etrade_id != NULL)		{			$difference = $this->etrade_amount - $this->trade_amount;			if($difference < 0)			{			echo "1";				$newamount = 0 - $difference;				$sellmoney = $this->etrade_value * $this->etrade_amount;					$buymoney = ($this->trade_amount - $newamount);				AddMoney($sellmoney, $this->etrade_owner, $this->etrade_type);				AddMoney($buymoney,$this->trade_owner,$this->trade_type);				$this->trade_amount = $newamount;				$this->etrade_amount = 0;							}			if($difference > 0)			{			echo "2";				$newamount = 0 + $difference;				$sellmoney = ($this->etrade_amount - $newamount) * $this->etrade_value;				AddMoney($sellmoney, $this->etrade_owner, $this->etrade_type);				AddMoney($this->trade_amount,$this->trade_owner,$this->trade_type);				$this->etrade_amount = $newamount;				$this->trade_amount=0;			}			if($difference == 0)			{			echo "3";			echo $this->etrade_type;				AddMoney($this->etrade_amount * $this->etrade_value, $this->etrade_owner, $this->etrade_type);				AddMoney($this->trade_amount,$this->trade_owner,$this->trade_type);				$this->etrade_amount=0;				$this->trade_amount=0;			}			$this->UpdateTrade();			$this->UpdateETrade();			$type = $this->trade_type;			$quantity = $this->standard;			$time = time();			$price = $this->trade_value;			mysql_query("INSERT INTO Trade_History (`Market_Id`,`Price`,`Quantity`,`Timestamp`)VALUES ('$type','$price','$quantity','$time');");		}	}}?>